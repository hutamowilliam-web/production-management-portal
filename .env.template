# ============================================
# Production Management Portal - Configuration
# ============================================

# ============================================
# Server Configuration
# ============================================
NODE_ENV=development
PORT=3001
FRONTEND_URL=http://localhost:5173

# ============================================
# Database Configuration
# ============================================
DB_HOST=localhost
DB_USER=root
DB_PASSWORD=your_db_password_here
DB_NAME=production_management
DB_PORT=3306

# Connection pool settings
DB_CONNECTION_LIMIT=10
DB_WAIT_FOR_CONNECTIONS=true
DB_QUEUE_LIMIT=0

# ============================================
# Authentication & Security
# ============================================
JWT_SECRET=your_jwt_secret_key_generate_long_random_string_here
JWT_EXPIRATION=24h

# Encryption key (32 characters hex string)
ENCRYPTION_KEY=0123456789abcdef0123456789abcdef

# ============================================
# Rate Limiting
# ============================================
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# ============================================
# Power Apps / Dynamics 365 Configuration
# ============================================

# Enable Power Apps integration
POWER_APPS_ENABLED=true

# Dynamics 365 / Power Apps Instance Configuration
POWER_APPS_INSTANCE_URL=https://orgc50eefba.crm4.dynamics.com
POWER_APPS_API_VERSION=v9.2
POWER_APPS_ORGANIZATION_ID=0821ea5d-22b3-f011-8706-002248a15045
POWER_APPS_ENVIRONMENT_ID=191e27b3-e1c2-e59a-a351-14238bd22a4f

# ============================================
# AUTHENTICATION METHOD (Choose One)
# ============================================

# OPTION 1: Connection String (RECOMMENDED - No Azure AD needed)
# Get this from Power Apps or Dynamics 365 connection settings
# Format: AuthType=OAuth;Url=https://orgc50eefba.crm4.dynamics.com;ClientId=xxx;ClientSecret=xxx
POWER_APPS_CONNECTION_STRING=

# OPTION 2: API Key (If your organization uses API keys)
POWER_APPS_API_KEY=

# OPTION 3: Azure AD / OAuth 2.0 (Optional - Only if you use Azure)
POWER_APPS_TENANT_ID=bd73b480-be67-4cc7-8034-b696715a2b99
POWER_APPS_CLIENT_ID=your_azure_app_client_id_here
POWER_APPS_CLIENT_SECRET=your_azure_app_client_secret_here

# Webhook Configuration (for Power Apps -> App sync)
WEBHOOK_BASE_URL=http://localhost:3001

# ============================================
# Email Configuration (Optional)
# ============================================
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your_email@gmail.com
SMTP_PASSWORD=your_app_password_here
SMTP_FROM=noreply@productionmanagement.com

# ============================================
# Notification Configuration
# ============================================
# Slack webhook URL (optional)
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL

# ============================================
# Logging Configuration
# ============================================
LOG_LEVEL=info
LOG_FILE=logs/app.log

# ============================================
# Session Configuration
# ============================================
SESSION_SECRET=your_session_secret_key_here
SESSION_TIMEOUT=3600000

# ============================================
# File Upload Configuration
# ============================================
MAX_FILE_SIZE=10485760
UPLOAD_DIR=./uploads
ALLOWED_FILE_TYPES=pdf,doc,docx,xls,xlsx,png,jpg,jpeg

# ============================================
# Feature Flags
# ============================================
FEATURE_FORMS_ENABLED=true
FEATURE_REPORTS_ENABLED=true
FEATURE_NOTIFICATIONS_ENABLED=true
FEATURE_POWER_APPS_ENABLED=true

# ============================================
# External API Keys (Optional)
# ============================================
# Add any third-party API keys here
# EXTERNAL_API_KEY=your_key_here

# ============================================
# Development/Debug Settings
# ============================================
DEBUG=false
VERBOSE_LOGGING=false

# ============================================
# NOTES:
# ============================================
# 1. For Production:
#    - Set NODE_ENV=production
#    - Use strong JWT_SECRET and SESSION_SECRET
#    - Configure real database host/credentials
#    - Add valid Power Apps credentials
#    - Use HTTPS URLs for webhooks
#    - Enable rate limiting appropriately
#
# 2. For Power Apps Integration:
#    - Register an Azure App in your tenant (TENANT_ID)
#    - Get CLIENT_ID and CLIENT_SECRET from Azure
#    - Configure Dynamics 365 instance URL
#    - Create Power Apps custom connector
#    - Set up webhook subscriptions
#
# 3. Security Best Practices:
#    - Never commit .env with real secrets
#    - Use environment variable management in production
#    - Rotate secrets regularly
#    - Use strong encryption keys
#
# 4. Database:
#    - Ensure MySQL is running on specified host/port
#    - Database should be pre-created (see setup-database.bat)
#    - Update credentials for your environment
#
# 5. Power Apps Setup:
#    - See POWER_APPS_INTEGRATION.md for detailed instructions
#    - After configuring credentials, run health check endpoint
#    - Monitor logs for sync operations
